(function(f){function l(e,m){var n=function(){},l={pageClass:"dragend-page",direction:"horizontal",minDragDistance:"40",onSwipeStart:n,onSwipeEnd:n,onDrag:n,onDragEnd:n,keyboardNavigation:!1,itemsInPage:1,scribe:0,borderBetweenPages:0,duration:300,hammerSettings:{drag_min_distance:0,css_hacks:!1,prevent_default:!0}},q={37:"left",38:"up",39:"right",40:"down"},r={overflow:"hidden",padding:0},h=function(a,b){var c,d;for(c in b)if(b.hasOwnProperty(c)){d=b[c];switch(c){case "height":case "width":case "marginLeft":case "marginTop":d+=
"px"}a.style[c]=d}},g=function(a,b){for(var c in b)a[c]=b[c];return a},k=function(a,b){return function(){return a.apply(b,Array.prototype.slice.call(arguments))}},s=function(a,b,c,d,g){var h=+new Date,f=parseInt(a.style[b],10),k=setInterval(function(){var e=+new Date-h;e>=d?(e=c,g(),clearInterval(k)):e=Math.round((c-f)*(Math.floor(100*(e/d))/100)+f);a.style[b]=e+"px"},5)},t=function(){var a=document.createElement("div"),b=["Khtml","Ms","O","Moz","Webkit"],c=b.length;return function(d){if(d in a.style)return!0;
for(d=d.replace(/^[a-z]/,function(a){return a.toUpperCase()});c--;)if(b[c]+d in a.style)return!0;return!1}}(),p=function(a,b){var c=g({},l);this.settings=g(c,b);this.container=a;this.pageContainer=document.createElement("div");this.scrollBorder={x:0,y:0};this.page=0;this.preventScroll=!1;this.pageCssProperties={margin:0};this.pageContainer.innerHTML=this.container.innerHTML;this.container.innerHTML=null;this.container.appendChild(this.pageContainer);h(this.container,r);this._observe();f.setTimeout(k(function(){this.updateInstance(b)},
this),10)},u=function(a){"horizontal"===this.settings.direction?h(this.pageContainer,{"-webkit-transform":"translateX("+a.x+"px)","-moz-transform":"translateX("+a.x+"px)","-ms-transform":"translateX("+a.x+"px)","-0-transform":"translateX("+a.x+"px)",transform:"translateX("+a.x+"px)"}):"vertical"===this.settings.direction&&h(this.pageContainer,{"-webkit-transform":"translateY("+a.y+"px)","-moz-transform":"translateY("+a.y+"px)","-ms-transform":"translateY("+a.y+"px)","-o-transform":"translateY("+a.y+
"px)",transform:"translateY("+a.y+"px)"})},w=function(){h(this.pageContainer,{"-webkit-transition":"-webkit-transform "+this.settings.duration+"ms ease-out","-moz-transition":"-moz-transform "+this.settings.duration+"ms ease-out","-ms-transition":"-ms-transform "+this.settings.duration+"ms ease-out","-o-transition":"-o-transform "+this.settings.duration+"ms ease-out",transition:"transform "+this.settings.duration+"ms ease-out"});this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y});f.setTimeout(k(v,
this),this.settings.duration)},v=function(){this._onSwipeEnd();h(this.pageContainer,{"-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"",transition:""})},x=function(){var a,b;this.activeElement=this.pages[this.page*this.settings.itemsInPage];"horizontal"===this.settings.direction?(a="marginLeft",b=-this.scrollBorder.x):"vertical"===this.settings.direction&&(a="marginTop",b=-this.scrollBorder.y);s(this.pageContainer,a,b,this.settings.duration,k(this._onSwipeEnd,this))};
(function(){var a,b;t("transform")?(a=u,b=w):(a=_scrollWithoutTransform,b=x);g(p.prototype,{_scroll:a,_animateScroll:b})})();g(p.prototype,{_checkOverscroll:function(a,b,c){var d={x:b,y:c,overscroll:!0};switch(a){case "right":if(!this.scrollBorder.x&&this._checkGestureDirection(a))return Math.round(d.x=(b-this.scrollBorder.x)/5),d;break;case "left":if((this.pagesCount-1)*this.pageDimentions.width<=this.scrollBorder.x)return d.x=Math.round(-((Math.ceil(this.pagesCount)-1)*(this.pageDimentions.width+
this.settings.borderBetweenPages))+b/5),d;break;case "down":if(!this.scrollBorder.y&&this._checkGestureDirection(a))return d.y=Math.round((c-this.scrollBorder.y)/5),d;break;case "up":if((this.pagesCount-1)*this.pageDimentions.height<=this.scrollBorder.y)return d.y=Math.round(-((Math.ceil(this.pagesCount)-1)*(this.pageDimentions.height+this.settings.borderBetweenPages))+c/5),d}return{x:b-this.scrollBorder.x,y:c-this.scrollBorder.y,overscroll:!1}},_observe:function(){if(!m)throw Error("It seems like Hammer JS is not be included before dragend JS");
(new m(this.container,this.settings.hammerSettings)).on("drag",k(this._onDrag,this)).on("dragend",k(this._onDragend,this));m.event.bindDom(f,"resize",k(this._sizePages,this));this.settings.keyboardNavigation&&m.event.bindDom(document.body,"keydown",k(this._onKeydown,this))},_onDrag:function(a){var b;a.stopPropagation();if(a.gesture)a=a.gesture,b=this._checkOverscroll(a.direction,a.deltaX,a.deltaY),this.settings.onDrag.call(this,this.activeElement,a,b.overscroll);else throw Error("Dragend JS detected some problems with the event handling. Maybe the user-drag CSS attribute on images can help");
this.preventScroll||this._scroll(b)},_onDragend:function(a){var b;a.preventDefault?a.preventDefault():a.preventManipulation&&a.preventManipulation();if(a.gesture)b=a.gesture;else throw Error("Dragend JS detected some problems with the event handling. Maybe the user-drag CSS attribute on images can help");a.gesture.distance>this.settings.minDragDistance&&this._checkGestureDirection(b.direction)?this.swipe(b.direction):this._scrollToPage();this.settings.onDragEnd.call(this,this.container,this.activeElement,
this.page)},_onKeydown:function(a){(a=q[a.keyCode])&&this._scrollToPage(a)},_checkGestureDirection:function(a){if(("left"===a||"right"===a)&&"horizontal"===this.settings.direction||("up"===a||"down"===a)&&"vertical"===this.settings.direction)return!0},setHorizontalContainerCssValues:function(){g(this.pageCssProperties,{cssFloat:"left",overflowY:"auto",overflowX:"hidden",padding:0,display:"block"});h(this.pageContainer,{overflow:"hidden",width:(this.pageDimentions.width+this.settings.borderBetweenPages)*
this.pagesCount,boxSizing:"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1E3,margin:0,padding:0})},setVerticalContainerCssValues:function(){g(this.pageCssProperties,{overflow:"hidden",padding:0,display:"block"});h(this.pageContainer,{"padding-bottom":this.settings.scribe,boxSizing:"content-box","-webkit-backface-visibility":"hidden","-webkit-perspective":1E3,margin:0})},setContainerCssValues:function(){switch(this.settings.direction){case "horizontal":this.setHorizontalContainerCssValues();
break;case "vertical":this.setVerticalContainerCssValues()}},_setPageDimentions:function(){var a=this.container.offsetWidth,b=this.container.offsetHeight;"horizontal"===this.settings.direction?a-=parseInt(this.settings.scribe,10):b-=parseInt(this.settings.scribe,10);this.pageDimentions={width:a,height:b}},_sizePages:function(){var a=this.pages.length;this._setPageDimentions();this.setContainerCssValues();"horizontal"===this.settings.direction?g(this.pageCssProperties,{height:this.pageDimentions.height,
width:this.pageDimentions.width/this.settings.itemsInPage}):g(this.pageCssProperties,{height:this.pageDimentions.height/this.settings.itemsInPage,width:this.pageDimentions.width});for(var b=0;b<a;b++)h(this.pages[b],this.pageCssProperties)},_calcNewPage:function(a,b){switch(a){case "up":this.page<this.pagesCount-1&&(this.scrollBorder.y=this.scrollBorder.y+this.pageDimentions.height+this.settings.borderBetweenPages,this.page++);break;case "down":0<this.page&&(this.scrollBorder.y=this.scrollBorder.y-
this.pageDimentions.height-this.settings.borderBetweenPages,this.page--);break;case "left":this.page<this.pagesCount-1&&(this.scrollBorder.x=this.scrollBorder.x+this.pageDimentions.width+this.settings.borderBetweenPages,this.page++);break;case "right":0<this.page&&(this.scrollBorder.x=this.scrollBorder.x-this.pageDimentions.width-this.settings.borderBetweenPages,this.page--);break;case "page":switch(this.settings.direction){case "horizontal":this.scrollBorder.x=(this.pageDimentions.width+this.settings.borderBetweenPages)*
b;break;case "vertical":this.scrollBorder.y=(this.pageDimentions.height+this.settings.borderBetweenPages)*b}this.page=b;break;default:this.scrollBorder.y=0,this.page=this.scrollBorder.x=0}},_onSwipeEnd:function(){this.preventScroll=!1;this.activeElement=this.pages[this.page*this.settings.itemsInPage];this.settings.onSwipeEnd.call(this,this.container,this.activeElement,this.page)},_jumpToPage:function(a,b){a&&this._calcNewPage(a,b);this._scroll({x:-this.scrollBorder.x,y:-this.scrollBorder.y})},_scrollToPage:function(a,
b){this.preventScroll=!0;a&&this._calcNewPage(a,b);this._animateScroll()},swipe:function(a){this.settings.onSwipeStart.call(this,this.container,this.activeElement,this.page);this._scrollToPage(a)},updateInstance:function(a){a=a||{};"object"===typeof a&&g(this.settings,a);var b=this.settings.pageClass,c=this.pageContainer,d=[];if(document.querySelector&&document.querySelectorAll)d=c.getElementsByClassName(b);else for(var c=c.getElementsByTagName("*"),e=0;e<c.length;e++)-1<(" "+c[e].className+" ").indexOf(" "+
b+" ")&&d.push(c[e]);this.pages=Array.prototype.slice.call(d);if(this.pages.length)this.pagesCount=this.pages.length/this.settings.itemsInPage;else throw Error("No pages found");this.activeElement=this.pages[this.page*this.settings.itemsInPage];this._sizePages();a.jumpToPage&&this.jumpToPage(a.jumpToPage)},scrollToPage:function(a){this._scrollToPage("page",a-1)},jumpToPage:function(a){this._jumpToPage("page",a-1)}});e&&(e.fn.dragend=function(a){a=a||{};this.each(function(){var b=e(this).data("dragend");
b?(b.updateInstance(a),a.jumpToPage&&b.jumpToPage(a.jumpToPage)):(b=new p(this,a),e(this).data("dragend",b));a.scrollToPage&&b.scrollToPage(a.scrollToPage);"string"===typeof a&&b.swipe(a)});return this});return p}"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["jquery","hammer"],function(e,f){return l(e,f)}):f.Dragend=l(f.jQuery||f.Zepto,f.Hammer)})(window);
